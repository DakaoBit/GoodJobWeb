<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/lib/tom-select/tom-select.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" href="/img/logo.ico" type="image/x-icon">
</head>

<body>
    <div class="container-fluid">
        <div id="stcky-header" class="row text-center"></div>
        <div class="j_border row">
            <div class="col">
                <div class="marquee" style="font-size: 8rem;">
                    <div class="marquee_group">
                        <p>Premium Job</p>
                        <p aria-hidden="true">Premium Job</p>
                        <p aria-hidden="true">Premium Job</p>
                    </div>

                    <div aria-hidden="true" class="marquee_group">
                        <p>Premium Job</p>
                        <p aria-hidden="true">Premium Job</p>
                        <p aria-hidden="true">Premium Job</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="j_border row text-center">
            <div class="col">
                <h1>Premium Job: $<span>price</span></h1>
            </div>
        </div>
        <!-- form -->
        <!-- Email -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Email address</label>
                <input id="mail" type="email" class="form-control form-control-lg" placeholder="your@email.com">
            </div>
        </div>
        <!-- CompanyName -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Company Name</label>
                <input id="companyName" type="text" class="form-control form-control-lg"
                    placeholder="e.g. Your Company">
            </div>
        </div>
        <!-- Title -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Title</label>
                <input id="title" type="text" class="form-control form-control-lg" placeholder="e.g. Directer">
            </div>
        </div>
        <!-- Type -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Type</label>
                <div class="p-xl-2 col-3">
                    <select id="type" multiple placeholder="Select Job Type">
                        <option value="Freelance">Freelance</option>
                        <option value="Full-time">Full-time</option>
                        <option value="Internship">Internship</option>
                        <option value="Part-time">Part-time</option>
                    </select>
                </div>
            </div>
        </div>
        <!-- Skill -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Skill</label>
                <input id="skill" type="text" class="form-control form-control-lg" placeholder="e.g. Accounting">
            </div>
        </div>
        <!-- Level -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Level</label>
                <div class="p-xl-2 col-3">
                    <select id="level" multiple placeholder="Select Job Level">
                        <option value="Directer">Directer</option>
                        <option value="Intern">Intern</option>
                        <option value="Lead">Lead</option> 
                        <option value="Manager">Manager</option> 
                        <option value="Lead">Lead</option> 
                        <option value="Senior">Senior</option> 
                        <option value="Junior">Junior</option> 
                    </select>
                </div>
            </div>
        </div>
        <!-- Location -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Location</label>
                <input id="location" type="text" class="form-control form-control-lg" placeholder="e.g. Job Location">
            </div>
        </div>
        <!-- Remote -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Remote friendly</label>
                <div class="p-xl-2 p-lg-2 p-md-2 p-sm-2">
                    <div class="form-check form-switch form-switch-lg">
                        <input id="isRemote" onclick="SelectRemote(this)" class="form-check-input" type="checkbox"
                            value="0">
                    </div>
                </div>
            </div>
        </div>
        <!-- Description -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Description (Max. 200 characters)</label>
                <textarea id="description" class="form-control form-control-lg" rows="3"
                    placeholder="e.g. Details about company, job purpose, key skills"></textarea>
            </div>
        </div>
        <!-- Link -->
        <div class="j_border row">
            <div class="col p-1">
                <label class="form-label h2 p-xl-2">Link</label>
                <input id="link" type="text" class="form-control form-control-lg"
                    placeholder="e.g. https://company.com/job">
            </div>
        </div>
        <div class="j_border row">
            <div class="d-grid gap-2 p-1">
                <button id="btnSubmit" onclick="Submit()" class="btn bg_premium" type="button">Post</button>
            </div>
        </div>
    </div>

    <!--SweetAlert2-->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/js/share/sweetalert2.js"></script>
    <!--Lodash-->
    <script src="/lib/lodash/lodash.min.js"></script>
    <script src="/lib/tom-select/tom-select.complete.min.js"></script>
    <script src="/lib/validator/validator.min.js"></script>
    <script src="/js/share/utils.js"></script>
    <script src="/js/share/http.js"></script>
    <script type="module" src="/js/site.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {

            new TomSelect("#type", {
                create: false,
                sortField: {
                    field: "text",
                    direction: "asc",
                },
            });

            new TomSelect("#level", {
                create: false,
                sortField: {
                    field: "text",
                    direction: "asc",
                },
            });
        });

        function ValidateInput(paremeters) {
            var { mail, companyName, title, skill, location, isRemote, link } = paremeters;
            //全部顯示的方式
            //   let aletUl = document.createElement("ul");

            //   if (_.isEmpty(mail)) {
            //     let li = document.createElement("li");
            //     let content = document.createTextNode("Email is Required");
            //     li.appendChild(content)
            //     aletUl.appendChild(li);
            //   }

            //   if (!_.isEmpty(aletUl.innerHTML))
            //   {
            //     var obj = {
            //       icon: "warning",
            //       title: "Warning",
            //       html: aletUl,
            //     };
            //     swalHtml(obj);
            //   }

            if (_.isEmpty(mail)) {
                swalPremium("Warning", "Email is Required");
                return;
            }
            if (!ValidateEmail(mail)) {
                swalPremium("Warning", "Email Format Error");
                return;
            }
            if (_.isEmpty(companyName)) {
                swalPremium("Warning", "Company Name is Required");
                return;
            }
            if (_.isEmpty(title)) {
                swalPremium("Warning", "Job Title is Required");
                return;
            }
            let type = GetSelectedOptionValue("type");
            if (_.isEmpty(type)) {
                swalPremium("Warning", "Job Type is Required");
                return;
            }
            if (_.isEmpty(skill)) {
                swalPremium("Warning", "Job Skill is Required");
                return;
            }
            let level = GetSelectedOptionValue("level");
            if (_.isEmpty(level)) {
                swalPremium("Warning", "Job Level is Required");
                return;
            }
            if (_.isEmpty(location)) {
                swalPremium("Warning", "Job Location is Required");
                return;
            }

            let description = document.getElementById("description").value;
            if (_.isEmpty(description)) {
                swalPremium("Warning", "Job Description is Required");
                return;
            }
            if (!ValidateLength(description, 10, 200)){
                swalPremium("Warning", "Job Description need 10 ~ 200 characters");
                return;
            }
            if (_.isEmpty(link)) {
                swalPremium("Warning", "Link is Required");
                return;
            }
            if (!ValidateURL(link)) {
                swalPremium("Warning", "Link is not an url");
                return;
            }

            return true;
        }

        async function Submit() {
            var paremeters = GetAllInputValue();

            if (ValidateInput(paremeters) == true) {
                // let url = location.protocol + '//' + location.host;
                // var apiUrl = url + "/jobpost/getCompanyPost";
                var { mail, companyName, title, skill, location, isRemote, link } = paremeters;
                var obj = {
                    mail,
                    companyName,
                    title,
                    type: GetSelectedOptionValue("type"),
                    skill,
                    level: GetSelectedOptionValue("level"),
                    location,
                    isRemote,
                    description: document.getElementById("description").value,
                    link
                };
                console.log(obj);
            }
        }

        /**
         * 是否為遠端 0:否 1:是
         * @param {*} chk 
         */
         async function SelectRemote(chk) {
            if (chk.checked)
                chk.value = 1;
            else
                chk.value = 0;
        }
    </script>
</body>

</html>